<!-- Winter Wonderland Header Component -->
<header class="winter-header" role="banner">
    <!-- Top Navigation Bar -->
    {% if theme.topnav_is_dark %}
    <div class="winter-topnav winter-topnav--dark">
    {% else %}
    <div class="winter-topnav winter-topnav--light">
    {% endif %}
        <div class="container">
            <div class="winter-topnav__content">
                <!-- Store Info -->
                <div class="winter-topnav__info">
                    {% if store.mobile %}
                        <a href="tel:{{ store.mobile }}" class="winter-topnav__link">
                            <i class="sicon-phone"></i>
                            {{ store.mobile }}
                        </a>
                    {% endif %}
                    {% if store.email %}
                        <a href="mailto:{{ store.email }}" class="winter-topnav__link">
                            <i class="sicon-envelope"></i>
                            {{ store.email }}
                        </a>
                    {% endif %}
                </div>
                
                <!-- User Actions -->
                <div class="winter-topnav__actions">
                    {% if user %}
                        <div class="winter-user-menu">
                            <button class="winter-user-toggle" aria-expanded="false">
                                <i class="sicon-user"></i>
                                {{ user.name }}
                                <i class="sicon-keyboard_arrow_down"></i>
                            </button>
                            <div class="winter-user-dropdown">
                                <a href="{{ link('customer.profile') }}" class="winter-dropdown-item">
                                    <i class="sicon-user-circle"></i>
                                    {{ trans('pages.profile.title') }}
                                </a>
                                <a href="{{ link('customer.orders') }}" class="winter-dropdown-item">
                                    <i class="sicon-receipt"></i>
                                    {{ trans('pages.orders.title') }}
                                </a>
                                <a href="{{ link('customer.wishlist') }}" class="winter-dropdown-item">
                                    <i class="sicon-heart"></i>
                                    {{ trans('pages.wishlist.title') }}
                                </a>
                                <hr class="winter-dropdown-divider">
                                <a href="{{ link('logout') }}" class="winter-dropdown-item">
                                    <i class="sicon-logout"></i>
                                    {{ trans('pages.auth.logout') }}
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <a href="{{ link('login') }}" class="winter-topnav__link">
                            <i class="sicon-login"></i>
                            {{ trans('pages.auth.login') }}
                        </a>
                    {% endif %}
                    
                    <!-- Language Switcher -->
                    {% if store.locales|length > 1 %}
                        <div class="winter-language-switcher">
                            <button class="winter-lang-toggle" aria-expanded="false">
                                <i class="sicon-globe"></i>
                                {{ store.locale|upper }}
                                <i class="sicon-keyboard_arrow_down"></i>
                            </button>
                            <div class="winter-lang-dropdown">
                                {% for locale in store.locales %}
                                    {% if locale != store.locale %}
                                        <a href="{{ link('locale', locale) }}" class="winter-dropdown-item">
                                            {{ locale|upper }}
                                        </a>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Header -->
    <div class="winter-main-header">
        <div class="container">
            <div class="winter-header__content">
                <!-- Mobile Menu Toggle -->
                <button class="winter-mobile-toggle" aria-label="{{ trans('common.elements.main_menu') }}">
                    <span class="winter-hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </span>
                </button>
                
                <!-- Store Logo -->
                <div class="winter-logo">
                    <a href="{{ link('home') }}" class="winter-logo__link">
                        {% if store.logo %}
                            <img src="{{ store.logo }}" alt="{{ store.name }}" class="winter-logo__image">
                        {% else %}
                            <h1 class="winter-logo__text">{{ store.name }}</h1>
                        {% endif %}
                    </a>
                </div>
                
                <!-- Search Bar -->
                <div class="winter-search">
                    <form action="{{ link('search') }}" method="GET" class="winter-search__form">
                        <div class="winter-search__input-group">
                            <input type="search" 
                                   name="q" 
                                   value="{{ request.q }}"
                                   placeholder="{{ trans('pages.search.placeholder') }}"
                                   class="winter-search__input"
                                   autocomplete="off">
                            <button type="submit" class="winter-search__button" aria-label="{{ trans('pages.search.submit') }}">
                                <i class="sicon-search"></i>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Header Actions -->
                <div class="winter-header__actions">
                    <!-- Wishlist -->
                    <a href="{{ link('wishlist') }}" class="winter-action-btn winter-wishlist-btn">
                        <i class="sicon-heart"></i>
                        <span class="winter-action-count" data-wishlist-count>{{ wishlist.count }}</span>
                        <span class="winter-action-label">{{ trans('pages.wishlist.title') }}</span>
                    </a>
                    
                    <!-- Cart -->
                    <button class="winter-action-btn winter-cart-btn" data-cart-toggle>
                        <i class="sicon-shopping-bag"></i>
                        <span class="winter-action-count" data-cart-count>{{ cart.count }}</span>
                        <span class="winter-action-label">{{ trans('pages.cart.title') }}</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigation Menu -->
    {% if theme.header_is_sticky %}
    <nav class="winter-navigation winter-navigation--sticky" role="navigation">
    {% else %}
    <nav class="winter-navigation" role="navigation">
    {% endif %}
        <div class="container">
            <div class="winter-nav__content">
                <!-- Main Menu -->
                <ul class="winter-main-menu" role="menubar">
                    <li class="winter-menu-item" role="none">
                        <a href="{{ link('home') }}" class="winter-menu-link" role="menuitem">
                            <i class="sicon-home"></i>
                            {{ trans('pages.home.title') }}
                        </a>
                    </li>
                    
                    {% for category in categories %}
                        {% if category.children|length > 0 %}
                            <li class="winter-menu-item winter-menu-item--has-children" role="none">
                                <a href="{{ category.url }}" class="winter-menu-link" role="menuitem" aria-haspopup="true">
                                    {{ category.name }}
                                    <i class="sicon-keyboard_arrow_down"></i>
                                </a>
                                <ul class="winter-submenu" role="menu">
                                    {% for child in category.children %}
                                        <li class="winter-submenu-item" role="none">
                                            <a href="{{ child.url }}" class="winter-submenu-link" role="menuitem">
                                                {{ child.name }}
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </li>
                        {% else %}
                            <li class="winter-menu-item" role="none">
                                <a href="{{ category.url }}" class="winter-menu-link" role="menuitem">
                                    {{ category.name }}
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    
                    <!-- Additional Pages -->
                    {% if theme.important_links %}
                        {% for page in pages %}
                            <li class="winter-menu-item" role="none">
                                <a href="{{ page.url }}" class="winter-menu-link" role="menuitem">
                                    {{ page.title }}
                                </a>
                            </li>
                        {% endfor %}
                    {% endif %}
                </ul>
                
                <!-- Mobile Menu Overlay -->
                <div class="winter-mobile-overlay" data-mobile-overlay></div>
            </div>
        </div>
    </nav>
</header>

<!-- Winter Sparkle Effects -->
<div class="winter-sparkles" aria-hidden="true">
    {% for i in 1..20 %}
        <div class="winter-sparkle winter-sparkle--{{ i }}"></div>
    {% endfor %}
</div>
